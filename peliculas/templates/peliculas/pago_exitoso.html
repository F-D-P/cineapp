{% extends "peliculas/base.html" %}
{% block content %}
<div class="container mt-5 text-center" data-aos="fade-up">
  <h2 class="text-success fw-bold">
    <i class="fas fa-check-circle"></i> Â¡Pago exitoso!
  </h2>
  <p class="lead">
    Tu reserva <strong>#{{ reserva.id }}</strong> fue confirmada correctamente.
  </p>

  <div class="card mt-4 p-4 shadow-lg bg-light text-dark">
    <h4 class="fw-bold">{{ reserva.funcion.pelicula.titulo }}</h4>
    <p>
      ðŸ“… FunciÃ³n: Sala {{ reserva.funcion.sala }} Â· {{
      reserva.funcion.fecha|date:"d/m/Y" }} {{ reserva.funcion.hora|time:"H:i"
      }}
    </p>
    <p>
      ðŸ’º Asientos: {% for asiento in reserva.asientos.all %} {{ asiento.fila
      }}{{ asiento.numero }}{% if not forloop.last %}, {% endif %} {% endfor %}
    </p>
    <p>ðŸ”¢ Cantidad: {{ reserva.cantidad }}</p>
    <p>âš« Estado: {{ reserva.estado|title }}</p>

    <table class="table table-bordered text-start bg-white shadow-sm">
      <tbody>
        <tr>
          <th scope="row"><i class="fas fa-calendar-alt"></i> FunciÃ³n</th>
          <td>{{ reserva.funcion.fecha|date:"d/m/Y" }} - {{ reserva.funcion.hora|time:"H:i" }}</td>
        </tr>
        <tr>
          <th scope="row"><i class="fas fa-chair"></i> Asientos</th>
          <td>{{ reserva.lista_asientos }}</td>
        </tr>
        <tr>
          <th scope="row"><i class="fas fa-users"></i> Cantidad</th>
          <td>{{ reserva.cantidad }}</td>
        </tr>
        <tr>
          <th scope="row"><i class="fas fa-info-circle"></i> Estado</th>
          <td>{{ reserva.estado|title }}</td>
        </tr>
      </tbody>
    </table>

    {% if reserva.qr_code and reserva.qr_code.url %}
    <div class="mt-4">
      <p class="fw-semibold">Presenta este cÃ³digo QR en la entrada:</p>
      <img
        src="{{ reserva.qr_code.url }}"
        alt="QR de la reserva"
        class="img-fluid rounded shadow"
        style="max-width: 250px"
      />
    </div>
    {% endif %}
  </div>

  <div class="d-grid gap-3 mt-5">
    <a href="{% url 'mis_entradas' %}" class="btn btn-outline-success btn-lg">
      <i class="fas fa-ticket-alt"></i> Ver mis reservas
    </a>
    <a href="{% url 'inicio' %}" class="btn btn-outline-secondary btn-lg">
      <i class="fas fa-film"></i> Volver al catÃ¡logo
    </a>
  </div>
</div>
{% endblock %}
